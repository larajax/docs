import{_ as s,c as a,o as i,ag as t}from"./chunks/framework.B-XtCDNB.js";const c=JSON.parse('{"title":"Events","description":"","frontmatter":{},"headers":[],"relativePath":"api/events/index.md","filePath":"api/events/index.md"}'),n={name:"api/events/index.md"};function h(l,e,r,p,o,d){return i(),a("div",null,[...e[0]||(e[0]=[t(`<h1 id="events" tabindex="-1">Events <a class="header-anchor" href="#events" aria-label="Permalink to &quot;Events&quot;">​</a></h1><p>Hooking in to events provides a way to enhance the behavior of the AJAX functionality. The events are listed below.</p><h3 id="ajax:before-request" tabindex="-1">Event - <code>ajax:before-request</code> <a class="header-anchor" href="#ajax:before-request" aria-label="Permalink to &quot;Event - \`ajax:before-request\` {#ajax:before-request}&quot;">​</a></h3><p>Triggered on the triggering element before the request is sent. The event detail contains <code>context</code> with the request options. Useful for element-specific loading indicators.</p><h3 id="ajax-before-send" tabindex="-1">Event - <code>ajax:before-send</code> <a class="header-anchor" href="#ajax-before-send" aria-label="Permalink to &quot;Event - \`ajax:before-send\` {#ajax-before-send}&quot;">​</a></h3><p>Triggered on the window object before sending the request. The event detail contains <code>context</code> with the request options.</p><h3 id="ajax:request-start" tabindex="-1">Event - <code>ajax:request-start</code> <a class="header-anchor" href="#ajax:request-start" aria-label="Permalink to &quot;Event - \`ajax:request-start\` {#ajax:request-start}&quot;">​</a></h3><p>Triggered on the window object when the HTTP request starts. The event detail contains:</p><ul><li><code>url</code> - The request URL</li><li><code>xhr</code> - The XMLHttpRequest object</li></ul><p>Useful for global loading indicators.</p><h3 id="ajax:request-end" tabindex="-1">Event - <code>ajax:request-end</code> <a class="header-anchor" href="#ajax:request-end" aria-label="Permalink to &quot;Event - \`ajax:request-end\` {#ajax:request-end}&quot;">​</a></h3><p>Triggered on the window object when the HTTP request ends. The event detail contains:</p><ul><li><code>url</code> - The request URL</li><li><code>xhr</code> - The XMLHttpRequest object</li></ul><h3 id="ajax:before-update" tabindex="-1">Event - <code>ajax:before-update</code> <a class="header-anchor" href="#ajax:before-update" aria-label="Permalink to &quot;Event - \`ajax:before-update\` {#ajax:before-update}&quot;">​</a></h3><p>Triggered on the form object directly after the request is complete, but before the page is updated.</p><h3 id="ajax:update" tabindex="-1">Event - <code>ajax:update</code> <a class="header-anchor" href="#ajax:update" aria-label="Permalink to &quot;Event - \`ajax:update\` {#ajax:update}&quot;">​</a></h3><p>Triggered on a page element after it has been updated with the framework.</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#result&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">).</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ajax:update&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    console.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">log</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Updated the #result element!&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="ajax:update-complete" tabindex="-1">Event - <code>ajax:update-complete</code> <a class="header-anchor" href="#ajax:update-complete" aria-label="Permalink to &quot;Event - \`ajax:update-complete\` {#ajax:update-complete}&quot;">​</a></h3><p>Triggered on the window object after all elements are updated by the framework.</p><p>Animating an element after a specific AJAX handler completes its update.</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ajax:update-complete&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">handler</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event.detail.context;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // If the handler is either of the following</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> ([</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;onRemoveFromCart&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;onAddToCart&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">].</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(handler)) {</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">        // Run an animation for 2 seconds</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">        var</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> el </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> document.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">querySelector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;#miniCart&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        el.classList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;animate-shockwave&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">        setTimeout</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() { el.classList.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">remove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;animate-shockwave&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">); }, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2000</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div><h3 id="ajax:request-success" tabindex="-1">Event - <code>ajax:request-success</code> <a class="header-anchor" href="#ajax:request-success" aria-label="Permalink to &quot;Event - \`ajax:request-success\` {#ajax:request-success}&quot;">​</a></h3><p>Triggered on the form object after the request is successfully completed. The handler gets 5 parameters: the event object, the context object, the data object received from the server, the status text string, and the XHR object.</p><h3 id="ajax:request-complete" tabindex="-1">Event - <code>ajax:request-complete</code> <a class="header-anchor" href="#ajax:request-complete" aria-label="Permalink to &quot;Event - \`ajax:request-complete\` {#ajax:request-complete}&quot;">​</a></h3><p>Triggered on the triggering element after the request completes (success or error). The event detail contains:</p><ul><li><code>context</code> - The request context</li><li><code>data</code> - The response data</li><li><code>responseCode</code> - The HTTP status code</li><li><code>xhr</code> - The XMLHttpRequest object</li></ul><h3 id="ajax:request-cancel" tabindex="-1">Event - <code>ajax:request-cancel</code> <a class="header-anchor" href="#ajax:request-cancel" aria-label="Permalink to &quot;Event - \`ajax:request-cancel\` {#ajax:request-cancel}&quot;">​</a></h3><p>Triggered on the triggering element when a request is cancelled, such as when the user declines a confirmation dialog. The event detail contains:</p><ul><li><code>context</code> - The request context</li></ul><p>Use this event alongside <code>ajax:request-complete</code> to ensure loaders are hidden even when requests are cancelled before they start.</p><h3 id="ajax:request-error" tabindex="-1">Event - <code>ajax:request-error</code> <a class="header-anchor" href="#ajax:request-error" aria-label="Permalink to &quot;Event - \`ajax:request-error\` {#ajax:request-error}&quot;">​</a></h3><p>Triggered on the form object if the request encounters an error.</p><h3 id="ajax:error-message" tabindex="-1">Event - <code>ajax:error-message</code> <a class="header-anchor" href="#ajax:error-message" aria-label="Permalink to &quot;Event - \`ajax:error-message\` {#ajax:error-message}&quot;">​</a></h3><p>Triggered on the window object when an error message should be displayed. The event detail contains:</p><ul><li><code>message</code> - The error message from the server</li></ul><p>Call <code>event.preventDefault()</code> to suppress the default <code>alert()</code> behavior.</p><h3 id="ajax:confirm-message" tabindex="-1">Event - <code>ajax:confirm-message</code> <a class="header-anchor" href="#ajax:confirm-message" aria-label="Permalink to &quot;Event - \`ajax:confirm-message\` {#ajax:confirm-message}&quot;">​</a></h3><p>Triggered on the window object when confirmation is required (via <code>data-request-confirm</code> or the <code>confirm</code> option). The event detail contains:</p><ul><li><code>message</code> - The confirmation message</li><li><code>promise</code> - An object with <code>resolve()</code> and <code>reject()</code> methods to continue or cancel the request</li></ul><p>Call <code>event.preventDefault()</code> to suppress the default <code>confirm()</code> dialog.</p><h3 id="ajax:setup" tabindex="-1">Event - <code>ajax:setup</code> <a class="header-anchor" href="#ajax:setup" aria-label="Permalink to &quot;Event - \`ajax:setup\` {#ajax:setup}&quot;">​</a></h3><p>Triggered before the request is formed. The event detail provides the <code>context</code> object, allowing options to be modified via <code>context.options</code>. Use this to apply global configuration to all AJAX requests.</p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">addEventListener</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;ajax:setup&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">event</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    const</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">options</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> event.detail.context;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Enable flash message handling on all requests</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    options.flash </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Disable the progress bar globally</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    options.progressBar </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> false</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Handle Error Messages by triggering a flashMsg of type error</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    options.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">handleErrorMessage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        jax.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">flashMsg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ message: message, type: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;error&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    // Handle Flash Messages by triggering a flashMsg of the message type</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    options.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">handleFlashMessage</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">message</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        jax.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">flashMsg</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({ message: message, type: type });</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">});</span></span></code></pre></div>`,44)])])}const E=s(n,[["render",h]]);export{c as __pageData,E as default};
